"use strict";(self.webpackChunkha_dash=self.webpackChunkha_dash||[]).push([[3158],{"./mocks/entities/light.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>phillipsHueLightStrip});const phillipsHueLightStrip={entity_id:"light.hue_light_strip_right",state:"off",attributes:{min_color_temp_kelvin:2e3,max_color_temp_kelvin:6535,min_mireds:153,max_mireds:500,effect_list:["None","candle","fire"],supported_color_modes:["color_temp","xy"],mode:"normal",dynamics:"none",icon:"mdi:led-strip-variant",friendly_name:"Vin Lightstrip Right",supported_features:44},context:{id:"01GY9E3KTNW4SNPBFV35EDTJME",parent_id:null,user_id:null},last_changed:"2023-04-18T05:41:24.949Z",last_updated:"2023-04-18T05:41:24.949Z"}},"./src/components/device/light/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>Light});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),commands=__webpack_require__("./node_modules/home-assistant-js-websocket/dist/commands.js"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs");lib.z.object({area_id:lib.z.string().nullable(),config_entries:lib.z.array(lib.z.string()),configuration_url:lib.z.string().nullable(),connections:lib.z.array(lib.z.tuple([lib.z.string(),lib.z.string()])),disabled_by:lib.z.string().nullable(),entry_type:lib.z.string().nullable(),hw_version:lib.z.string().nullable(),id:lib.z.string(),identifiers:lib.z.array(lib.z.array(lib.z.string())),manufacturer:lib.z.string().nullable(),model:lib.z.string().nullable(),name:lib.z.string(),name_by_user:lib.z.string().nullable(),sw_version:lib.z.string().nullable(),via_device_id:lib.z.string().nullable()}),lib.z.object({aliases:lib.z.array(lib.z.string()),area_id:lib.z.string(),name:lib.z.string(),picture:lib.z.string().nullable()}),lib.z.object({attributes:lib.z.any(),context:lib.z.object({id:lib.z.string(),parent_id:lib.z.string().nullable(),user_id:lib.z.string().nullable()}),entity_id:lib.z.string(),last_changed:lib.z.string(),last_updated:lib.z.string(),state:lib.z.string()}),lib.z.object({area_id:lib.z.string().nullable(),categories:lib.z.object({}),config_entry_id:lib.z.string(),device_id:lib.z.string(),disabled_by:lib.z.string(),entity_category:lib.z.unknown().nullable(),entity_id:lib.z.string(),has_entity_name:lib.z.boolean(),hidden_by:lib.z.unknown().nullable(),icon:lib.z.unknown().nullable(),id:lib.z.string(),labels:lib.z.array(lib.z.unknown()),name:lib.z.string().nullable(),options:lib.z.object({conversation:lib.z.object({should_expose:lib.z.boolean()})}),original_name:lib.z.string(),platform:lib.z.string(),translation_key:lib.z.string(),unique_id:lib.z.string()});(0,__webpack_require__("./node_modules/zustand/esm/index.mjs").Ue)((set=>({areas:[],setAreas:areas=>set((()=>({areas}))),entityRegistry:[],setEntityRegistry:entityRegistry=>set((()=>({entityRegistry}))),entities:{},setEntities:entities=>set((()=>({entities}))),states:[],setStates:states=>set((()=>({states}))),services:{},setServices:services=>set((()=>({services}))),config:null,setConfig:config=>set((()=>({config}))),devices:[],setDevices:devices=>set((()=>({devices})))})));__webpack_require__("./node_modules/console-browserify/index.js");let connection;lib.z.string().url().parse("http://homeassistant.local:8123"),lib.z.string().parse("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJjMDkyYTRhNTBhYjI0YjM3YjEwNGEyNGFkY2IzZDc1MSIsImlhdCI6MTcxNjE2ODQ4NCwiZXhwIjoyMDMxNTI4NDg0fQ.rH2vSclj7_YEuNS044i96W4bSQr-q_EdRz51OcHSxek");const callService=async param=>{let{domain,service,service_data,target}=param;return await(0,commands._D)(connection,domain,service,service_data,target)};var utils=__webpack_require__("./src/lib/utils.ts"),colors=__webpack_require__("./node_modules/tailwindcss/colors.js"),colors_default=__webpack_require__.n(colors),deviceCard=__webpack_require__("./src/components/ui/deviceCard.tsx"),slider=__webpack_require__("./src/components/ui/slider.tsx"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),ui_button=__webpack_require__("./src/components/ui/button.tsx");const defaultColors=["#ffffff","#fdba74","#ea580c","#dc2626"],ColorGrid=param=>{let{setColor}=param;const[gridColors,_setGridColors]=(0,react.useState)(defaultColors);return(0,jsx_runtime.jsx)("div",{className:"flex flex-wrap gap-2",children:gridColors.map((gridColor=>(0,jsx_runtime.jsx)(ui_button.z,{className:"h-8 w-8 rounded border border-border p-0",style:{background:gridColor},onClick:()=>setColor(gridColor)},gridColor)))})};ColorGrid.__docgenInfo={description:"",methods:[],displayName:"ColorGrid",props:{color:{required:!0,tsType:{name:"string"},description:""},setColor:{required:!0,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""}}};var dist=__webpack_require__("./node_modules/@radix-ui/react-slider/dist/index.mjs");const BrightnessSlider=react.forwardRef(((param,ref)=>{let{className,color,value,...props}=param;const[sliderValue,setSliderValue]=react.useState(value);return react.useEffect((()=>{var _props_onValueChange;null===(_props_onValueChange=props.onValueChange)||void 0===_props_onValueChange||_props_onValueChange.call(props,sliderValue)}),[sliderValue]),(0,jsx_runtime.jsxs)(dist.fC,{orientation:"vertical",ref,className:(0,utils.cn)("relative flex w-[80px] touch-none select-none items-center",className),value:sliderValue,...props,onValueChange:value=>setSliderValue(value),children:[(0,jsx_runtime.jsx)(dist.fQ,{className:"relative h-60 w-full grow overflow-hidden rounded-[20px] border-2 border-border bg-white hover:cursor-pointer dark:bg-black",children:(0,jsx_runtime.jsx)(dist.e6,{className:"absolute w-full bg-bg-weak"})}),(0,jsx_runtime.jsx)(dist.bU,{className:"relative mx-2 mt-4 block h-[6px] w-[62px] cursor-grab rounded border border-none bg-black transition focus:outline-none",children:(0,jsx_runtime.jsxs)("div",{className:"-right-6 -translate-y-1/2 absolute top-1/2 translate-x-1/2 rounded-full bg-info px-2 py-1 text-xs",children:[sliderValue,"%"]})})]})}));BrightnessSlider.displayName=dist.fC.displayName,BrightnessSlider.__docgenInfo={description:"",methods:[]};const LightDialogContent=param=>{let{supportedFeatures,color,setColor,brightness,setBrightness}=param;const debouncedSetBrightness=(0,react.useRef)((0,utils.Ds)((value=>setBrightness(value)),300)).current;return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[supportedFeatures.has("SUPPORT_BRIGHTNESS")&&brightness?(0,jsx_runtime.jsx)(BrightnessSlider,{value:[brightness],color,onValueChange:values=>debouncedSetBrightness(values[0])}):null,supportedFeatures.has("SUPPORT_COLOR")&&color?(0,jsx_runtime.jsx)(ColorGrid,{color,setColor}):null]})};LightDialogContent.__docgenInfo={description:"",methods:[],displayName:"LightDialogContent",props:{color:{required:!1,tsType:{name:"string"},description:""},setColor:{required:!0,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""},brightness:{required:!1,tsType:{name:"number"},description:""},setBrightness:{required:!0,tsType:{name:"signature",type:"function",raw:"(brightness: number | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},name:"brightness"}],return:{name:"void"}}},description:""},supportedFeatures:{required:!0,tsType:{name:"Map",elements:[{name:"union",raw:"| 'SUPPORT_BRIGHTNESS'\n| 'SUPPORT_COLOR_TEMP'\n| 'SUPPORT_EFFECT'\n| 'SUPPORT_FLASH'\n| 'SUPPORT_COLOR'\n| 'SUPPORT_TRANSITION'\n| 'SUPPORT_WHITE_VALUE'",elements:[{name:"literal",value:"'SUPPORT_BRIGHTNESS'"},{name:"literal",value:"'SUPPORT_COLOR_TEMP'"},{name:"literal",value:"'SUPPORT_EFFECT'"},{name:"literal",value:"'SUPPORT_FLASH'"},{name:"literal",value:"'SUPPORT_COLOR'"},{name:"literal",value:"'SUPPORT_TRANSITION'"},{name:"literal",value:"'SUPPORT_WHITE_VALUE'"}]},{name:"number"}],raw:"Map<LightFeature, number>"},description:""}}};const LightCard=param=>{let{supportedFeatures=new Map,name,isOn,brightness=0,color,icon,setState,setColor,setBrightness}=param;const[sliderValue,setSliderValue]=(0,react.useState)(brightness);(0,react.useEffect)((()=>{setSliderValue(brightness)}),[brightness]);const debouncedSetBrightness=(0,react.useRef)((0,utils.Ds)((value=>setBrightness(value)),300)).current;(0,react.useEffect)((()=>{sliderValue!==brightness&&supportedFeatures.has("SUPPORT_BRIGHTNESS")&&debouncedSetBrightness(sliderValue)}),[sliderValue,supportedFeatures]);let colorOfLight=color;(0,utils.YN)(colorOfLight,"white")<1.1&&(colorOfLight=colors_default().slate[100]);let status="Off";return isOn&&(status="On",supportedFeatures.has("SUPPORT_BRIGHTNESS")&&(status="".concat(brightness,"%"))),(0,jsx_runtime.jsx)(deviceCard.pJ,{isActive:isOn,icon,name,status,setIsActive:setState,modalContent:(0,jsx_runtime.jsx)(LightDialogContent,{color,setColor,brightness,setBrightness,supportedFeatures}),children:isOn&&supportedFeatures.has("SUPPORT_BRIGHTNESS")?(0,jsx_runtime.jsx)("div",{className:"flex w-full gap-2",children:(0,jsx_runtime.jsx)(slider.i,{onValueChange:value=>setSliderValue(Number(value)),onClick:e=>e.stopPropagation(),value:[sliderValue],color,max:100,step:1,className:"flex-1"})}):null})};LightCard.__docgenInfo={description:"",methods:[],displayName:"LightCard",props:{supportedFeatures:{required:!1,tsType:{name:"Map",elements:[{name:"union",raw:"| 'SUPPORT_BRIGHTNESS'\n| 'SUPPORT_COLOR_TEMP'\n| 'SUPPORT_EFFECT'\n| 'SUPPORT_FLASH'\n| 'SUPPORT_COLOR'\n| 'SUPPORT_TRANSITION'\n| 'SUPPORT_WHITE_VALUE'",elements:[{name:"literal",value:"'SUPPORT_BRIGHTNESS'"},{name:"literal",value:"'SUPPORT_COLOR_TEMP'"},{name:"literal",value:"'SUPPORT_EFFECT'"},{name:"literal",value:"'SUPPORT_FLASH'"},{name:"literal",value:"'SUPPORT_COLOR'"},{name:"literal",value:"'SUPPORT_TRANSITION'"},{name:"literal",value:"'SUPPORT_WHITE_VALUE'"}]},{name:"number"}],raw:"Map<LightFeature, number>"},description:"",defaultValue:{value:"new Map()",computed:!1}},name:{required:!0,tsType:{name:"string"},description:""},color:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},isOn:{required:!0,tsType:{name:"boolean"},description:""},brightness:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},icon:{required:!0,tsType:{name:"IconProp"},description:""},setState:{required:!0,tsType:{name:"signature",type:"function",raw:"(state: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"state"}],return:{name:"void"}}},description:""},setColor:{required:!0,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""},setBrightness:{required:!0,tsType:{name:"signature",type:"function",raw:"(brightness: number | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},name:"brightness"}],return:{name:"void"}}},description:""}}};const LIGHT_FEATURES_BIT_MAP={1:"SUPPORT_BRIGHTNESS",2:"SUPPORT_COLOR_TEMP",4:"SUPPORT_EFFECT",8:"SUPPORT_FLASH",16:"SUPPORT_COLOR",32:"SUPPORT_TRANSITION",128:"SUPPORT_WHITE_VALUE"},MEDIA_PLAYER_FEATURES_BIT_MAP={1:"PAUSE",2:"SEEK",4:"VOLUME_SET",8:"VOLUME_MUTE",16:"PREVIOUS_TRACK",32:"NEXT_TRACK",128:"TURN_ON",256:"TURN_OFF",512:"PLAY_MEDIA",1024:"VOLUME_STEP",2048:"SELECT_SOURCE",4096:"STOP",8192:"CLEAR_PLAYLIST",16384:"PLAY",32768:"SHUFFLE_SET",65536:"SELECT_SOUND_MODE",131072:"BROWSE_MEDIA",262144:"REPEAT_SET",524288:"GROUPING",1048576:"MEDIA_ANNOUNCE",2097152:"MEDIA_ENQUEUE"};var light_console=__webpack_require__("./node_modules/console-browserify/index.js");const Light=param=>{let{entity}=param;light_console.log("🔈 ~ entity:",entity);const supportedFeatures=((type,featureNumber)=>{if(void 0===featureNumber)return new Map;const features=new Map,featureMap="light"===type?LIGHT_FEATURES_BIT_MAP:MEDIA_PLAYER_FEATURES_BIT_MAP;for(const key in featureMap)if((featureNumber&Number(key))===Number(key)){const feature=featureMap[Number(key)];features.set(feature,Number(key))}return features})("light",entity.attributes.supported_features),brightnessPct=(brightness=entity.attributes.brightness,Math.floor(brightness/255*100));var brightness;return(0,jsx_runtime.jsx)(LightCard,{supportedFeatures,brightness:brightnessPct,setState:async()=>{await callService({domain:"light",service:"toggle",service_data:{},target:{entity_id:entity.entity_id}})},setColor:async hexColor=>{await callService({domain:"light",service:"turn_on",service_data:{entity_id:entity.entity_id,rgb_color:(0,utils.oo)(hexColor)}})},setBrightness:async brightness=>{brightness&&await callService({domain:"light",service:"turn_on",service_data:{entity_id:entity.entity_id,brightness_pct:brightness}})},icon:["far","lightbulb"],color:"#FFF",isOn:"off"!==entity.state&&"unavailable"!==entity.state,name:entity.attributes.friendly_name||entity.entity_id})};Light.__docgenInfo={description:"",methods:[],displayName:"Light",props:{entity:{required:!0,tsType:{name:"HassEntity"},description:""}}}},"./src/components/ui/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>Button});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const buttonVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium text-sm transition-colors disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(((param,ref)=>{let{className,variant,size,asChild=!1,...props}=param;const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_4__.g7:"button";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(buttonVariants({variant,size,className})),ref,...props})}));Button.displayName="Button",Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{asChild:{defaultValue:{value:"false",computed:!1},required:!1}}}},"./src/components/ui/slider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>Slider});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_slider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-slider/dist/index.mjs"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const Slider=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(((param,ref)=>{let{className,...props}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_slider__WEBPACK_IMPORTED_MODULE_3__.fC,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("relative flex w-full touch-none select-none items-center",className),...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_slider__WEBPACK_IMPORTED_MODULE_3__.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_slider__WEBPACK_IMPORTED_MODULE_3__.e6,{className:"absolute h-full bg-primary"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_slider__WEBPACK_IMPORTED_MODULE_3__.bU,{className:"slider-thumb block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"})]})}));Slider.displayName=_radix_ui_react_slider__WEBPACK_IMPORTED_MODULE_3__.fC.displayName,Slider.__docgenInfo={description:"",methods:[]}}}]);